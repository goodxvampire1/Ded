<!-- Removed the second ball part and used the coin for score -->
<script>
    // Scene creation
    const scene = new THREE.Scene();

    // Camera setup
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 5;

    // Renderer setup
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Ball creation
    const ballGeometry = new THREE.SphereGeometry(0.5, 32, 32);
    const ballMaterial = new THREE.MeshStandardMaterial({ color: 0x00ff00, metalness: 0.6, roughness: 0.3 });
    const ball = new THREE.Mesh(ballGeometry, ballMaterial);
    ball.position.y = -1;
    scene.add(ball);

    // Fire creation (Game Over object)
    const fireGeometry = new THREE.BoxGeometry(0.6, 0.6, 0.6);
    const fireMaterial = new THREE.MeshStandardMaterial({ color: 0xff0000 });
    const fire = new THREE.Mesh(fireGeometry, fireMaterial);
    fire.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
    scene.add(fire);

    // Coin creation (Score object)
    const coinGeometry = new THREE.SphereGeometry(0.3, 16, 16);
    const coinMaterial = new THREE.MeshStandardMaterial({ color: 0xffff00, metalness: 0.8, roughness: 0.1 });
    const coin = new THREE.Mesh(coinGeometry, coinMaterial);
    coin.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
    scene.add(coin);

    // Light setup
    const light = new THREE.PointLight(0xffffff, 1.5);
    light.position.set(3, 3, 5);
    scene.add(light);
    scene.add(new THREE.AmbientLight(0x555555));

    // Ball movement variables
    let speedX = 0, speedY = 0;
    let score = 0;
    let level = 1;
    let gameOver = false;

    // Level speed increment
    function updateLevel() {
        if (score >= 10 && level === 1) {
            level = 2;
            speedX = 0.08;
            speedY = 0.08;
            document.getElementById("level").innerText = level;
        }
        if (score >= 20 && level === 2) {
            level = 3;
            speedX = 0.1;
            speedY = 0.1;
            document.getElementById("level").innerText = level;
        }
    }

    // Animation function
    function animate() {
        if (gameOver) return;

        requestAnimationFrame(animate);

        // Ball rotation
        ball.rotation.x += 0.02;
        ball.rotation.y += 0.02;

        // Ball movement
        ball.position.x += speedX;
        ball.position.y += speedY;

        // Collision Detection (Fire - Game Over)
        if (ball.position.distanceTo(fire.position) < 0.6) {
            gameOver = true;
            document.getElementById("gameOver").style.display = "block";
            document.getElementById("restartBtn").style.display = "inline-block";
            return; // Stop game
        }

        // Collision Detection (Coin - Score++)
        if (ball.position.distanceTo(coin.position) < 0.6) {
            score++;
            document.getElementById("score").innerText = score;
            coin.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0); // New coin spawn
            updateLevel(); // Update level if needed
        }

        renderer.render(scene, camera);
    }
    animate();

    // Keyboard control (⬅️⬆️⬇️➡️)
    window.addEventListener("keydown", (event) => {
        if (event.key === "ArrowRight") speedX = 0.05;
        if (event.key === "ArrowLeft") speedX = -0.05;
        if (event.key === "ArrowUp") speedY = 0.05;
        if (event.key === "ArrowDown") speedY = -0.05;
    });

    // Stop moving when key is released
    window.addEventListener("keyup", () => {
        speedX = 0;
        speedY = 0;
    });

    // Touch control (Random movement)
    window.addEventListener("touchstart", () => {
        speedX = (Math.random() - 0.5) * 0.1;
        speedY = (Math.random() - 0.5) * 0.1;
    });

    // Restart game
    document.getElementById("restartBtn").addEventListener("click", () => {
        gameOver = false;
        score = 0;
        level = 1;
        speedX = 0.05;
        speedY = 0.05;
        ball.position.set(0, -1, 0);
        fire.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
        coin.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
        document.getElementById("score").innerText = score;
        document.getElementById("level").innerText = level;
        document.getElementById("gameOver").style.display = "none";
        document.getElementById("restartBtn").style.display = "none";
        animate();
    });

    // Resize event
    window.addEventListener("resize", () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
    });
</script>
