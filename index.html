<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Ball Game (Levels & Restart)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
        #scoreBoard {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            font-size: 18px;
            border-radius: 5px;
        }
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            color: red;
            background: black;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
        #restartBtn {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
    </style>
</head>
<body>
    <div id="scoreBoard">Score: <span id="score">0</span> | Level: <span id="level">1</span></div>
    <div id="gameOver">üî• GAME OVER! üî•</div>
    <button id="restartBtn">Restart Game</button>

    <script>
        // Scene ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
        const scene = new THREE.Scene();

        // Camera ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶ï‡¶∞‡¶æ
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        // Renderer ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Ball ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
        const ballGeometry = new THREE.SphereGeometry(0.5, 32, 32);
        const ballMaterial = new THREE.MeshStandardMaterial({ color: 0x00ff00, metalness: 0.6, roughness: 0.3 });
        const ball = new THREE.Mesh(ballGeometry, ballMaterial);
        ball.position.y = -1;
        scene.add(ball);

        // Fire ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ (Game Over Object)
        const fireGeometry = new THREE.BoxGeometry(0.6, 0.6, 0.6);
        const fireMaterial = new THREE.MeshStandardMaterial({ color: 0xff0000 });
        const fire = new THREE.Mesh(fireGeometry, fireMaterial);
        fire.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
        scene.add(fire);

        // Coin ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ (Score Object)
        const coinGeometry = new THREE.SphereGeometry(0.3, 16, 16);
        const coinMaterial = new THREE.MeshStandardMaterial({ color: 0xffff00, metalness: 0.8, roughness: 0.1 });
        const coin = new THREE.Mesh(coinGeometry, coinMaterial);
        coin.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
        scene.add(coin);

        // Light ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
        const light = new THREE.PointLight(0xffffff, 1.5);
        light.position.set(3, 3, 5);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x555555));

        // Ball movement variables
        let speedX = 0, speedY = 0;
        let score = 0;
        let level = 1;
        let gameOver = false;

        // Level speed increment
        function updateLevel() {
            if (score >= 10 && level === 1) {
                level = 2;
                speedX = 0.08;
                speedY = 0.08;
                document.getElementById("level").innerText = level;
            }
            if (score >= 20 && level === 2) {
                level = 3;
                speedX = 0.1;
                speedY = 0.1;
                document.getElementById("level").innerText = level;
            }
        }

        // Animation Function
        function animate() {
            if (gameOver) return;

            requestAnimationFrame(animate);

            // ‡¶¨‡¶≤‡ßá‡¶∞ ‡¶ò‡ßÇ‡¶∞‡ßç‡¶£‡¶®
            ball.rotation.x += 0.02;
            ball.rotation.y += 0.02;

            // ‡¶¨‡¶≤ ‡¶Æ‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ
            ball.position.x += speedX;
            ball.position.y += speedY;

            // **Collision Detection (Fire - Game Over)**
            if (ball.position.distanceTo(fire.position) < 0.6) {
                gameOver = true;
                document.getElementById("gameOver").style.display = "block";
                document.getElementById("restartBtn").style.display = "inline-block";
                return; // Stop game
            }

            // **Collision Detection (Coin - Score++)**
            if (ball.position.distanceTo(coin.position) < 0.6) {
                score++;
                document.getElementById("score").innerText = score;
                coin.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0); // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßç‡¶™‡¶®
                updateLevel(); // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            }

            renderer.render(scene, camera);
        }
        animate();

        // **Keyboard Control (‚¨ÖÔ∏è‚¨ÜÔ∏è‚¨áÔ∏è‚û°Ô∏è)**
        window.addEventListener("keydown", (event) => {
            if (event.key === "ArrowRight") speedX = 0.05;
            if (event.key === "ArrowLeft") speedX = -0.05;
            if (event.key === "ArrowUp") speedY = 0.05;
            if (event.key === "ArrowDown") speedY = -0.05;
        });

        // **Stop Moving when Key Released**
        window.addEventListener("keyup", () => {
            speedX = 0;
            speedY = 0;
        });

        // **Touch Control (Random Movement)**
        window.addEventListener("touchstart", () => {
            speedX = (Math.random() - 0.5) * 0.1;
            speedY = (Math.random() - 0.5) * 0.1;
        });

        // **Restart Game**
        document.getElementById("restartBtn").addEventListener("click", () => {
            gameOver = false;
            score = 0;
            level = 1;
            speedX = 0.05;
            speedY = 0.05;
            ball.position.set(0, -1, 0);
            fire.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
            coin.position.set(Math.random() * 4 - 2, Math.random() * 4 - 2, 0);
            document.getElementById("score").innerText = score;
            document.getElementById("level").innerText = level;
            document.getElementById("gameOver").style.display = "none";
            document.getElementById("restartBtn").style.display = "none";
            animate();
        });

        // **Resize Event**
        window.addEventListener("resize", () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
</body>
</html>
